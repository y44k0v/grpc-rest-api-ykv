-- Create "users" table
CREATE TABLE `users` (`id` bigint NOT NULL AUTO_INCREMENT, `name` varchar(255) NOT NULL, `email` varchar(255) NOT NULL, `address` varchar(255) NOT NULL, `order_id` json NOT NULL, `created_at` timestamp NOT NULL, `last_updated` timestamp NOT NULL, `level` enum('customer','admin') NOT NULL DEFAULT "customer", PRIMARY KEY (`id`), UNIQUE INDEX `email` (`email`)) CHARSET utf8mb4 COLLATE utf8mb4_bin;
-- Create "orders" table
CREATE TABLE `orders` (`id` bigint NOT NULL AUTO_INCREMENT, `created_at` timestamp NOT NULL, `products_rodered` json NOT NULL, `last_updated` timestamp NOT NULL, `status` enum('placed','processing','finished') NOT NULL DEFAULT "placed", `sub_total` double NOT NULL, `user_orders` bigint NULL, PRIMARY KEY (`id`), INDEX `orders_users_orders` (`user_orders`), CONSTRAINT `orders_users_orders` FOREIGN KEY (`user_orders`) REFERENCES `users` (`id`) ON UPDATE NO ACTION ON DELETE SET NULL) CHARSET utf8mb4 COLLATE utf8mb4_bin;
-- Create "products" table
CREATE TABLE `products` (`id` bigint NOT NULL AUTO_INCREMENT, `name` varchar(255) NOT NULL, `description` varchar(255) NOT NULL, `price` double NOT NULL, `pictures` json NOT NULL, `categories` json NOT NULL, `qty_available` int NOT NULL, `created_at` timestamp NOT NULL, `last_updated` timestamp NOT NULL, `order_products` bigint NULL, PRIMARY KEY (`id`), UNIQUE INDEX `description` (`description`), INDEX `products_orders_products` (`order_products`), CONSTRAINT `products_orders_products` FOREIGN KEY (`order_products`) REFERENCES `orders` (`id`) ON UPDATE NO ACTION ON DELETE SET NULL) CHARSET utf8mb4 COLLATE utf8mb4_bin;
